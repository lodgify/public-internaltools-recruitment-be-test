@model IEnumerable<User>

@{
    ViewData["Title"] = "User's list";
}

<style>
    .icon-button {
        color: gray;
    }

        .icon-button:hover {
            color: blue;
            cursor: pointer;
        }
</style>
<table class="table table-striped table-bordered" id='table-user'>

    <thead>
        <tr>
            <th>#</th>
            <th>Name</th>
            <th>Email</th>
            <th>Created at</th>
            <th>actions</th>
        </tr>
    </thead>
    @foreach (var user in Model)
    {
        <tr>
            <td>@user.Id</td>
            <td>@user.FirstName @user.LastName</td>
            <td>@user.Email</td>
            <td>@user.CreatedAt</td>
            <td class="text-center"><i class="fa fa-info icon-button" data-toggle="tooltip" title="Delete" onclick="sendRequest(@user.Id);"></i></td>
        </tr>
    }
</table>

@section Scripts{

<script src="~/lib/bootstrap-data-table/js/jquery.dataTables.min.js"></script>

<script>
    $(document).ready(function() {
        $('#table-user').DataTable();
        $('[data-toggle="tooltip"]').tooltip();
    });

    function sendRequest(id){
        $.ajax({
            type: "Post",
            url: "/Users/GDPR",
            data: { 'id': id},
            beforeSend: blockPage,
            success: function(data) {
                
            },
            error: (xhr) =>errorHandler(xhr),
            complete: unblockPage
        });
    }
</script>
}